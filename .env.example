# =============================================================================
# Kishax API Multi-Module Environment Configuration
# =============================================================================
# Unified environment file for both local and production environments
# Copy this file to .env and configure as needed
# Set ENVIRONMENT=local or ENVIRONMENT=production to switch configurations

# =============================================================================
# Environment Mode (local/production)
# =============================================================================
ENVIRONMENT=local

# =============================================================================
# Integration Test Control
# =============================================================================
# LocalStack tests (enabled for local, disabled for production)
RUN_INTEGRATION_TESTS=true
# Real AWS tests (disabled for local, enabled for production)
RUN_REAL_AWS_TESTS=false

# =============================================================================
# AWS SQS Configuration
# =============================================================================
AWS_REGION=ap-northeast-1

# Local (LocalStack): use test credentials
# Production: use your actual AWS credentials
MC_WEB_SQS_ACCESS_KEY_ID=test
MC_WEB_SQS_SECRET_ACCESS_KEY=test

# Local (LocalStack): use localhost endpoints
# Production: use actual SQS queue URLs (New naming convention)
TO_WEB_QUEUE_URL=http://localhost:4566/000000000000/to-web-queue
TO_MC_QUEUE_URL=http://localhost:4566/000000000000/to-mc-queue
TO_DISCORD_QUEUE_URL=http://localhost:4566/000000000000/to-discord-queue

# =============================================================================
# Redis Configuration
# =============================================================================
# This Redis expects to kishax-web's redis service to be running
# Refer to https://github.com/Kishax/kishax-web/blob/master/compose.yaml for details
# you can overwrite REDIS_URL at compose.yaml
# REDIS_URL=redis://localhost:6379
REDIS_CONNECTION_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=3000

# =============================================================================
# SQS Worker Configuration
# =============================================================================
QUEUE_MODE=MC
SQS_WORKER_ENABLED=true
SQS_WORKER_POLLING_INTERVAL_SECONDS=5
SQS_WORKER_MAX_MESSAGES=10
SQS_WORKER_WAIT_TIME_SECONDS=20
SQS_WORKER_VISIBILITY_TIMEOUT_SECONDS=30

# =============================================================================
# Authentication API Configuration
# =============================================================================
AUTH_API_ENABLED=true
AUTH_API_PORT=8080
# Local: local_dev_auth_key
# Production: your_production_auth_key_here
AUTH_API_KEY=local_dev_auth_key

# =============================================================================
# Database Configuration
# =============================================================================
# This DATABASE_URL expects to kishax-web's db service to be running
# Refer to https://github.com/Kishax/kishax-web/blob/master/compose.yaml for details
# you can overwrite DATABASE_URL at compose.yaml
# DATABASE_URL=jdbc:postgresql://localhost:5432/kishax_db?user=postgres&password=postgres

# =============================================================================
# Application Configuration
# =============================================================================
# Local: 10 seconds
# Production: 30 seconds
APP_SHUTDOWN_GRACE_PERIOD_SECONDS=10

# =============================================================================
# Logging Configuration
# =============================================================================
# Local: DEBUG
# Production: INFO
LOG_LEVEL=DEBUG
AWS_SDK_LOG_LEVEL=WARN
LETTUCE_LOG_LEVEL=WARN
